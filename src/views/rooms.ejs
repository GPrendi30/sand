<% let my_rooms = [{"title": "Room11111111111111111111111111111111111111111111111111" , "img" : "/images/chat.png" }, {"title": "Room2" , "img" : "/images/chat.png" }, {"title": "Room3" , "img" : "/images/chat.png" },{"title": "Room1" , "img" : "/images/chat.png" }, {"title": "Room2" , "img" : "/images/chat.png" }, {"title": "Room3" , "img" : "/images/chat.png" },{"title": "Room1" , "img" : "/images/chat.png" }, {"title": "Room2" , "img" : "/images/chat.png" }, {"title": "Room3" , "img" : "/images/chat.png" },{"title": "Room3" , "img" : "/images/chat.png" },{"title": "Room3" , "img" : "/images/chat.png" },{"title": "Room3" , "img" : "/images/chat.png" },{"title": "Room3" , "img" : "/images/chat.png" },{"title": "Room3" , "img" : "/images/chat.png" },{"title": "Room3" , "img" : "/images/chat.png" },{"title": "Room3" , "img" : "/images/chat.png" },{"title": "Room3" , "img" : "/images/chat.png" },{"title": "Room3" , "img" : "/images/chat.png" },{"title": "Room3" , "img" : "/images/chat.png" },] %>
<% let other_rooms = [{"title": "Chat 1" , "img" : "/images/chat.png" }, {"title": "Chat 2" , "img" : "/images/chat.png" }, {"title": "Chat 3" , "img" : "/images/chat.png" }] %>
<% user = { invites: other_rooms } %>
<% user1 = { invites: [] } %>
<% user1 = { invites: my_rooms } %>

<section id="rooms">

    <div id="top">
        <!-- my rooms -->
        <article class="rooms_area" id="my_rooms">
            <div class="room_lineup_info">
                <h1>Your Rooms</h1>
                <p>Every room you have joined, or created.</p>
            </div>
            <ul class="discover_lineup">
                
                <% my_rooms.forEach( item => { %>
                    <li>
                        <a class="discover_item grow_hover shadow" href="/item/info">
                            <img src="<%= item.img %>" alt="<%= item.title %>">
                            <h1 class="room_title"><%= item.title %></h1>
                        </a>
                        <button class="button room_btn">Leave</button>
                    </li>
                <% }) %>
        
            </ul>
        </article>
  
      <!-- other rooms -->
        <article class="rooms_area" id="other_rooms">
            <div class="room_lineup_info">
                <h1>Explore rooms</h1>
                <p>Meet others with the same interests as you, and keep up to date on recent news.</p>
            </div>
            <ul class="discover_lineup">
              
                <% other_rooms.forEach( item => { %>
                    <li>
                        <div class="discover_item grow_hover shadow">
                            <a href="/item/info">
                                <img src="<%= item.img %>" alt="<%= item.title %>">
                                <h1><%= item.title %></h1>
                            </a>
                        </div>
                        <button class="button room_btn">Ask to Join</button>
                    </li>
                <% }) %>  
            </ul>
        </article>
    </div>

    <div id="bottom">

        <section id="user_invites">
            <h2>Your Room Invites</h3>
            <% if (user.invites == undefined || user.invites.length == 0) { %>
                <div class="no_invites">It appears you don't have any</div>
            <% } else { %>
                <ul>
                    <% user.invites.forEach(invite => { %>
                        <li class="room_invite">
                            <img src="<%= invite.img %>" alt="">
                            <h3 class="room_name"><%= invite.title %></h3>
                            <button class="button">Accept</button>
                        </li>
                    <% }) %>
                </ul>
            <% } %>
            
        </section>

        <section id="create_room">
            <div class="form-container">

                <section id="title">
                    <h1>Create New Room</h1>
                    <h2>Make a space where you and like-minded users can share, discuss, and engage with each other.</h2>
                </section>
            
                <!-- Fix form action -->
                <form method="POST" id="loginForm" action="/login" enctype="multipart/form-data">
                    <label for="username">
                        <h3>Name</h3>
                        <input type="text" name="name" required>
                    </label>
                    <label for="password">
                        <h3>Description</h3>
                        <input type="text" name="desc" required>
                    </label>
                    <label for="icon">
                        <h3>Icon</h3>
                        <input type="file" id="file" name="icon" accept="image/*">
                    </label>
                    <input class="grow_hover" type="submit" value="Create">
                </form>
            
            </div>
        </section>

    </div>
    
  
  </section>